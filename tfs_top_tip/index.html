<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" id="sixapart-standard">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="application-name" content="Martin Woodward"/>
<meta name="description" content="Woodwardweb, the blog of Martin Woodward"/>
<meta name="application-url" content="http://www.woodwardweb.com"/>

<link rel="icon" href="http://www.woodwardweb.com/favicon.ico" type="image/ico" />
<link rel="icon" href="http://www.woodwardweb.com/mwicons/Martin_32.png" sizes="32x32"/>
<link rel="icon" href="http://www.woodwardweb.com/mwicons/Martin_48.png" sizes="48x48"/>
<link rel="icon" href="http://www.woodwardweb.com/mwicons/Martin_64.png" sizes="64x64"/>
<link rel="icon" href="http://www.woodwardweb.com/mwicons/Martin_128.png" sizes="128x128"/>

<link rel="openid.server" href="http://www.myopenid.com/server" />
<link rel="openid.delegate" href="http://martinwoodward.myopenid.com/" />

<link rel="stylesheet" href="http://www.woodwardweb.com/woodwardweb.css" type="text/css" />
<link rel="start" href="http://www.woodwardweb.com/" title="Home" />
<link rel="alternate" type="application/atom+xml" title="Recent Entries" href="http://www.woodwardweb.com/index.xml" />

<script type="text/javascript" src="http://www.woodwardweb.com/mt.js"></script>
<!--
<rdf:RDF xmlns="http://web.resource.org/cc/"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
<Work rdf:about="http://www.woodwardweb.com/">
<dc:title>Martin Woodward</dc:title>
<dc:description></dc:description>
<license rdf:resource="http://creativecommons.org/licenses/by/1.0/" />
</Work>
<License rdf:about="http://creativecommons.org/licenses/by/1.0/">
<requires rdf:resource="http://web.resource.org/cc/Attribution" />
<requires rdf:resource="http://web.resource.org/cc/Notice" />
<permits rdf:resource="http://web.resource.org/cc/Reproduction" />
<permits rdf:resource="http://web.resource.org/cc/Distribution" />
<permits rdf:resource="http://web.resource.org/cc/DerivativeWorks" />
</License>
</rdf:RDF>
-->



    <title>Martin Woodward: TFS Top Tip Archives</title>


    <!-- Google tracker -->
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-71966-1");
pageTracker._trackPageview();
</script>
</head>
<body id="mt-blog" class="mt-archive-listing mt-category-archive layout-wt">
    <div id="container">
        <div id="container-inner">


            <div id="header">
    <div id="header-inner">
        <div id="header-content">


            <div id="header-name"><a href="http://www.woodwardweb.com/" accesskey="1">Martin Woodward</a></div>

        </div>
    </div>
</div>



            <div id="content">
                <div id="content-inner">


                    <div id="alpha">
                        <div id="alpha-inner">

                            
                            <h1 id="page-title" class="archive-title">Recently in <em>TFS Top Tip</em> Category</h1>






                            
                            <div id="entry-2226" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="http://www.woodwardweb.com/podcasting/radio_tfs_on_te.html" rel="bookmark">Radio TFS on Team System 2010 First Impressions</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author"><a class="fn url" href="http://www.woodwardweb.com">Martin Woodward</a></span> on <abbr class="published" title="2009-09-15T16:36:04+00:00">September 15, 2009  4:36 PM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            <p><img style="border-bottom: 0px; border-left: 0px; margin: 0px 0px 0px 10px; display: inline; border-top: 0px; border-right: 0px" title="The Coach" border="0" alt="The Coach" align="right" src="http://www.woodwardweb.com/WindowsLiveWriter/RadioTFSonTeamSystem2010FirstImpressions_E8E2/radiotfs_c100_139cefb0-c2b3-4536-be2f-49ad0105f052.jpg" width="128" height="128" /> Just released the latest Radio TFS episode.&#160; We got the whole gang together so decided to have a catch up and a chat about our first impression from using Beta 1 of Team System for a few weeks.</p>  <blockquote>   <p>Play Now: <a href="http://www.podtrac.com/pts/redirect.mp3/listen.radiotfs.com/radiotfs_026.mp3">Random Beta 1 Stuff</a></p> </blockquote>  <p>Links from the show:</p>  <ul>   <li><a href="http://msdn.microsoft.com/en-us/teamsystem/dd819231.aspx">Team System Beta 1</a></li>    <li><a href="http://www.hanselman.com/blog/ScottHanselmans2009UltimateDeveloperAndPowerUsersToolListForWindows.aspx">Scott Hanselman's Ultimate Tool List</a>      <ul>       <li><a href="http://www.sourcegear.com/diffmerge/">SourceGear DiffMerge</a></li>        <li><a href="http://www.inputdirector.com/">Input Director</a> (free for personal use)</li>     </ul>   </li>    <li><a href="http://blogs.msdn.com/mitrik/archive/2009/05/28/changing-to-slot-mode-in-tfs-2010-version-control.aspx">Matt Mitrick on Changing to Slot Mode in TFS</a></li> </ul>  <p>It was nice to all be back together again.&#160; Donâ€™t forget to visit the <a href="http://www.radiotfs.com">Radio TFS site</a> and subscribe to the podcast in iTunes or Zune for early access to all the latest shows.</p>
        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-1740" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="http://www.woodwardweb.com/vsts/teched_online_2.html" rel="bookmark">TechEd Online 2009: Cross Platform Development with Team Foundation Server and Teamprise</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author"><a class="fn url" href="http://www.woodwardweb.com">Martin Woodward</a></span> on <abbr class="published" title="2009-05-19T11:32:40+00:00">May 19, 2009 11:32 AM</abbr>
    
            </span>

            <span class="separator">|</span> <a href="http://www.woodwardweb.com/vsts/teched_online_2.html#comments">16 Comments</a>
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            <p>Last week at <a href="http://www.msteched.com/">TechEd</a> 2009 North America, I had the pleasure of sitting down with <a href="http://blogs.msdn.com/briankel/">Brian Keller</a> to discuss <a href="http://www.teamprise.com">Teamprise</a> past, present and future. If you have Silverlight installed you can watch the interview or you can <a href="http://www.msteched.com/online/view.aspx?tid=8c5c757d-1336-4644-b1b1-b36cc148e6b0">download the video from the TechEd site</a>.</p>  <p><a href="http://www.msteched.com/online/view.aspx?tid=8c5c757d-1336-4644-b1b1-b36cc148e6b0"><img style="border-bottom: 0px; border-left: 0px; display: block; float: none; margin-left: auto; border-top: 0px; margin-right: auto; border-right: 0px" title="Cross-Platform Development with Team Foundation Server and Teamprise" border="0" alt="Cross-Platform Development with Team Foundation Server and Teamprise" src="http://www.woodwardweb.com/WindowsLiveWriter/TechEdOnline2009CrossPlatformDevelopment_A1E7/techtalk_e16ba8f1-6291-48ce-aa12-7c8042a66da5.png" width="350" height="262" /></a></p>
        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-2201" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="http://www.woodwardweb.com/vsts/tfs_top_tip_16.html" rel="bookmark">TFS Top Tip #16 - Limit What you Build</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author"><a class="fn url" href="http://www.woodwardweb.com">Martin Woodward</a></span> on <abbr class="published" title="2009-01-29T16:39:03+00:00">January 29, 2009  4:39 PM</abbr>
    
            </span>

            <span class="separator">|</span> <a href="http://www.woodwardweb.com/vsts/tfs_top_tip_16.html#comments">2 Comments</a>
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            <p>When you create a new build definition in Team Foundation Server, you get to define how the workspace looks for the build.&#160; By default this includes the ENTIRE team project.&#160; While this <strong>usually always works</strong>, it is nearly always <strong>not what you want</strong>.</p>  <h4><strong><font size="3">Build Definition = What, How and When</font></strong></h4>  <p>You can think of a build definition as you telling TFS "What, How and When" you want to build something.&#160; The "What" is covered by the workspace template.&#160; The "How" is covered by the Project File (the TFSBuild.proj file in TFS2005 or TFS2008 or the WF Process in TFS2010).&#160; The "When" is the trigger. </p>  <p>If you think about it, the "What" is pretty important. Not only does it include the files that are downloaded for your build, it also informs the trigger.&#160; If you have set a build to run on every check-in then it needs to know what you are building to determine if the check-in applies to it.&#160; If you set your "What" to be too broad then you will build when you don't need to.&#160; If you set your "What" too narrow, then your build will not be triggered by files that impact the build.&#160; This will become even more important when Gated Check-ins come along in TFS 2010, but doing this now will dramatically speed up the performance of your builds and mean that CI builds are done when something that you care about changes.&#160; Let's take a look at the workspace template definition screen as it gets populated by default:</p>  <p><img title="Build Definition - Wallboard" style="border-top-width: 0px; display: block; border-left-width: 0px; float: none; border-bottom-width: 0px; margin-left: auto; margin-right: auto; border-right-width: 0px" height="300" alt="Build Definition - Wallboard" src="http://www.woodwardweb.com/WindowsLiveWriter/TFSTopTip16LimitWhatyouBuild_A38F/Build%20Definition%20-%20Wallboard_cb16de60-c756-4808-bf32-cea8a51dea0b.png" width="405" border="0" /> </p>  <p>Notice that we have the server path of the Team Project mapped to the $(SourceDir).&#160; You can click on either of these paths and edit them.&#160; Most of the time, you just want to edit the server path to restrict it to the root of the project that you want to build such as:</p>  <p><img title="Build Definition - Wallboard (2)" style="border-top-width: 0px; display: block; border-left-width: 0px; float: none; border-bottom-width: 0px; margin-left: auto; margin-right: auto; border-right-width: 0px" height="300" alt="Build Definition - Wallboard (2)" src="http://www.woodwardweb.com/WindowsLiveWriter/TFSTopTip16LimitWhatyouBuild_A38F/Build%20Definition%20-%20Wallboard%20(2)_93b46cce-7745-4d1c-8b60-703c84b73aef.png" width="405" border="0" /> </p>  <p>If you only learn one thing from this tip, then the above is all you really need to know to make your experience with Team Foundation Build much nicer.&#160; However, the working folder mappings can get quite complicated if you want to.</p>  <h4><strong>Excluding Certain Folders from the Build.</strong></h4>  <p>Now, lets take a different scenario. Suppose you are working on a web site. You have your graphic designers also checking in their digital assets into the $/AdventureWorks/main/dotnet/Wallboard/assets folder in the project but you don't want to create a new build when they check in their huge Photoshop files - especially as the .psd files are not actually used in the website, just the .gif and .jpg files that they generate from the .psd's.&#160; In this case you can use a cloaked working folder mapping to tell TFS to ignore those files from the trigger and when downloading source before a build.</p>  <p><img title="Build Definition - Wallboard (3)" style="border-top-width: 0px; display: block; border-left-width: 0px; float: none; border-bottom-width: 0px; margin-left: auto; margin-right: auto; border-right-width: 0px" height="300" alt="Build Definition - Wallboard (3)" src="http://www.woodwardweb.com/WindowsLiveWriter/TFSTopTip16LimitWhatyouBuild_A38F/Build%20Definition%20-%20Wallboard%20(3)_09a92630-bb92-40fc-a9a2-09c81bd3e1f7.png" width="405" border="0" /> </p>  <h4><strong>Building from Multiple Places</strong></h4>  <p>Another scenario you might be faced with is building two things at the same time from different parts of your source tree.&#160; That's easy - simply add another Active working folder mapping and adjust your LocalFolder mappings accordingly:</p>  <p><img title="Build Definition - Wallboard (4)" style="border-top-width: 0px; display: block; border-left-width: 0px; float: none; border-bottom-width: 0px; margin-left: auto; margin-right: auto; border-right-width: 0px" height="300" alt="Build Definition - Wallboard (4)" src="http://www.woodwardweb.com/WindowsLiveWriter/TFSTopTip16LimitWhatyouBuild_A38F/Build%20Definition%20-%20Wallboard%20(4)_d63a5661-9dfe-40ba-bbc1-bdf1bf08fe9a.png" width="405" border="0" /> </p>  <h4><strong>What Variables are Allowed?</strong></h4>  <p>In the Local Folder mapping you can hard code paths, but it isn't recommended.&#160; There are two variables that can be used, $(SourceDir) and $(BuildDir). BuildDir is the build directory as defined in the build agent definition. $(SourceDir) is usually $(BuildDir)\Sources.&#160; The "Sources" part is actually not hard-coded and can be modified by editing the TfsBuildServer.exe.config on the build agent machine if you wanted.&#160; For example if you changed</p>  <blockquote>   <p>&lt;add key=&quot;SourcesSubdirectory&quot; value=&quot;Sources&quot; /&gt;</p> </blockquote>  <p>to be </p>  <blockquote>   <p>&lt;add key=&quot;SourcesSubdirectory&quot; value=&quot;s&quot; /&gt;</p> </blockquote>  <p>then $(SourceDir) would get expanded to $(BuildDir)\s on the build agent.&#160; Therefore, $(SourceDir) is by far the most useful option.&#160; That said - if you wanted to make your build to be triggered to changed to the TFSBuild.proj file, but for backwards compatibility with VS2005 you had your build configuration folder in the default "$/TeamProject/TeamBuildTypes" folder instead of the project's branch (which would be my recommended location) then you could use the $(BuildDir) variable to trick TeamBuild into triggering a build when the TFSBuild.proj file were modified by setting your build configuration as follows:</p>  <p><img title="Build Definition - Wallboard (5)" style="border-top-width: 0px; display: block; border-left-width: 0px; float: none; border-bottom-width: 0px; margin-left: auto; margin-right: auto; border-right-width: 0px" height="300" alt="Build Definition - Wallboard (5)" src="http://www.woodwardweb.com/WindowsLiveWriter/TFSTopTip16LimitWhatyouBuild_A38F/Build%20Definition%20-%20Wallboard%20(5)_277622f6-49f7-4df4-b97d-a3c3fd9dea65.png" width="405" border="0" /> </p>  <p>By setting the server path to "$/AdventureWorks/TeamBuildTypes/Wallboard CI/*" and the local path to "$(BuildDir)\temp" we are telling Team Build to include the files in the root of the build configuration folder but to place them outside of the SourceDir so that they do not confuse our build process.&#160; Note that in 2008 working folder mappings because a lot more flexible, so you can now map the root level of a folder using the Asterisk (*) wildcard and you can also map individual files as active or cloaked working folder mappings if you want to include or exclude individual files.</p>  <p>In summary, spend some time to think about what you want included in your build and do not be afraid to have your version control repository organized in a way that makes building it simple. One of the biggest problems when people move to a new version control system is that they inherit the repository layout from their old system rather than sitting down and thinking about what makes most sense with the new features or restrictions of the system that you are moving to.&#160; Happy Building!</p>
        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-1722" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="http://www.woodwardweb.com/tfs_top_tip/tfs_top_tip_15.html" rel="bookmark">TFS Top Tip #15 - Baseline your Builds</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author"><a class="fn url" href="http://www.woodwardweb.com">Martin Woodward</a></span> on <abbr class="published" title="2008-01-16T07:36:36+00:00">January 16, 2008  7:36 AM</abbr>
    
            </span>

            <span class="separator">|</span> <a href="http://www.woodwardweb.com/tfs_top_tip/tfs_top_tip_15.html#comments">2 Comments</a>
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            <p>Microsoft Team Foundation Server 2008 has a great new improved build system (often referred to as "Team Build").&nbsp; An advantage of running your build from Team Build is that (by default) all changes between your current build and the last good one are reported in the build report and any work items that were associated with those changesets are automatically updated with the build number they were fixed in.</p> <p>However, when demonstrating this feature - the following thing always catches me out and is important to remember when using Team Build in production.&nbsp; The very first time you run a build, it does not associate that build with changesets or update any work items.</p> <p>Therefore, the first time your create a new build definition you should manually run a build and make sure it is successful.&nbsp; </p> <p>In fact I would recommend you do this anyway, even if the changeset association thing wasn't the case, after all you need to test that the new build definition you created actually works!</p> <p>The reason why Team Build 2008 works in this way is that when Team Build successfully completes a build it stores the label applied to that last good build.&nbsp; The next time it runs a build that is successful it will compare the two labels to detect which changesets were included in the build.&nbsp; It will then look over those changesets for any associated work items and update them to include the build number in which they were fixed.</p> <p>This tip is also true if you upgrade from TFS2005 to TFS2008.&nbsp; Once the upgrade is complete you should run your builds once manually to check that they are all still working fine and to give a baseline from which changes can be detected. </p>
        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-1702" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="http://www.woodwardweb.com/tfs_top_tip/tfs_top_tip_14.html" rel="bookmark">TFS Top Tip #14: The only 2 things you need to know when customizing Team Build</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author"><a class="fn url" href="http://www.woodwardweb.com">Martin Woodward</a></span> on <abbr class="published" title="2007-10-26T23:09:24+00:00">October 26, 2007 11:09 PM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            <p>If you are customizing a team build, then there are only two things you need to know to get you started.&nbsp; The rest you can (mostly) figure out from there.</p> <ol> <li>Your build is defined in a file called TFSBuild.proj for your particular Team Build Type.&nbsp; You probably figured that bit out already.&nbsp; The first thing you need to know is that the TFSBuild.proj file inherits most of its logic from a file called Microsoft.TeamFoundation.Build.targets which lives in <br><code>%ProgramFiles%\MSBuild\Microsoft\VisualStudio\TeamBuild\Microsoft.TeamFoundation.Build.targets</code>.<br>If you open this file in Notepad you can see that it is exceptionally well commented.&nbsp; There is no smoke and mirrors with Team Build, if it happens at all then it triggered by this file. Note that you should <strong>never edit the Microsoft.TeamFoundation.Build.targets</strong> file.&nbsp; In Team Build 2008 there are so many hook points provided for you to insert your own logic into the build that you should never need to.&nbsp; Microsoft goes to some rather extreme lengths to ensure backwards compatibility with this file (i.e. a TFSBuild.proj file written with the TFS2005 targets file in mind will work just great with the 2008 targets file).&nbsp; If you modify the targets file, not only are you setting your self up for deployment nightmares but you servicing nightmares as well if you attempt to upgrade to later version or even possibly service packs - don't say I didn't tell you ;-) <li>If you get a bit lost in reading the targets file - the MSDN help for build customizations is pretty good.&nbsp; The best starting point is the page "<a href="http://msdn2.microsoft.com/en-us/library/ms400710(VS.90).aspx">Understanding Team Foundation Build Configuration Files</a>" - however the pages that this links to that I refer to constantly are <a href="http://msdn2.microsoft.com/aa337604(VS.90).aspx">Customizable Team Foundation Build Targets</a> and <a href="http://msdn2.microsoft.com/aa337598(VS.90).aspx">Customizable Team Foundation Build Properties</a>.&nbsp; That said - most of the comments in those MSDN help pages are actually in the targets file itself - just sometimes the property or task you are after is easier to find in the MSDN help.</li></ol>
        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-1685" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="http://www.woodwardweb.com/tfs_top_tip/tfs_top_tip_13.html" rel="bookmark">TFS Top Tip #13 - Watch where you drop stuff</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author"><a class="fn url" href="http://www.woodwardweb.com">Martin Woodward</a></span> on <abbr class="published" title="2007-07-21T05:13:51+00:00">July 21, 2007  5:13 AM</abbr>
    
            </span>

            <span class="separator">|</span> <a href="http://www.woodwardweb.com/tfs_top_tip/tfs_top_tip_13.html#comments">1 Comment</a>
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            <p>With Team Build in Team Foundation Server, you can have multiple build types for multiple projects.&nbsp; For example, we have a build that runs fast that we can have running <a href="http://en.wikipedia.org/wiki/Continuous_Integration">Continuous Integration</a> on, and a slower build (that does obfuscation, release packaging etc) that is run on demand when we want to perform a release to QA (some of which later go on to become public releases).</p> <p>A neat feature in the Team Build stuff is that you specify a drop location for your builds and the packaged binaries along with the build log and test results will be placed in a folder corresponding to the build name.&nbsp; In all the demos you see, this will typically be specified as something like <a href="file://\\server\drop">\\server\drop</a> and you may well do this yourself at first.&nbsp; Pretty quickly the drop folder will fill up with builds and get confusing.</p> <p>A better way is a rather simple solution that I almost didn't mention, however&nbsp;when I mentioned this to a friend of mine and it caused some head-slapping, so I thought I'd discuss it here.&nbsp; Apologies if you'd already figured this out this rather basic step.</p> <p>Simply, put your builds into folders.&nbsp; Something like:-</p> <ul> <li>\\server\drop\product\buildType\</li></ul> <p>To give an example:-</p> <ul> <li>\\jeeves\drop\teamprise\ci  <li>\\jeeves\drop\teamprise\release</li></ul> <p>You can obviously take this further if need be.&nbsp; For example we currently have builds going on in two main places, we are putting Teamprise 2.2 through final testing while, in parallel, we work on the next major release in trunk.&nbsp; In the example above,&nbsp;it means we have 4 builds types in total and&nbsp;can follow the convention of \\server\drop\product\branch\buildType&nbsp;to make:-</p> <ul> <li>\\jeeves\drop\teamprise\2.2\ci  <li>\\jeeves\drop\teamprise\2.2\release  <li>\\jeeves\drop\teamprise\trunk\ci  <li>\\jeeves\drop\teamprise\trunk\release</li></ul> <p>&nbsp;Pretty simple really, but helps to plan this stuff up front.</p>
        </div>



    </div>
    <div class="asset-footer"></div>
</div>


                            
                            <div id="entry-2050" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="http://www.woodwardweb.com/tfs_top_tip/tfs_top_tip_12.html" rel="bookmark">TFS Top Tip #12 - Specifying a proxy server at the command line</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                By <span class="vcard author"><a class="fn url" href="http://www.woodwardweb.com">Martin Woodward</a></span> on <abbr class="published" title="2007-01-04T16:07:43+00:00">January  4, 2007  4:07 PM</abbr>
    
            </span>

            <span class="separator">|</span> <a href="http://www.woodwardweb.com/tfs_top_tip/tfs_top_tip_12.html#comments">1 Comment</a>
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            <p>If (<a href="http://www.woodwardweb.com/vsts/000273.html">like me</a>) you are using the <a href="http://msdn2.microsoft.com/en-us/cc31bk2e(VS.80).aspx">tf.exe</a> command line to access your Team Foundation Server via a Version Control Proxy from a remote office, then the following tip is extremely useful - much more so than my previous <a href="http://www.woodwardweb.com/vsts/000286.html">registry hack</a>.&nbsp; </p> <p>There is currently no option with the Microsoft command line to pass a version control proxy server in to TF.exe.&nbsp; It will pick one up if you have one set in the registry if you have used&nbsp;the Team Explorer GUI&nbsp;- but that isn't great for scripted scenarios.&nbsp; <a href="http://blogs.msdn.com/jmanning/">James Manning</a> recently pointed me in the direction of an undocumented environment variable called TFSPROXY.&nbsp; If set, the TFS client will use that setting to proxy your requests.&nbsp; Therefore the following will call tf.exe passing a proxy server to use in your connection:-</p> <blockquote><pre>@echo off
setlocal
set TFSPROXY=http://your_proxy_server:8081
tf %*
endlocal</pre></blockquote>
<p>I saved this in a batch file called "tfvp.cmd" (for "tf via proxy"), therefore if I want to call tf via my proxy and I'm in a shell that doesn't have the environment variable set I can call my script.</p>
<p>The only command that this really useful for is when doing a tfs get command, as only the download is sent via the version control proxy server,&nbsp;the majority of requests go direct to the&nbsp;main Team Foundation Server application tier that you are connected to.</p>
<p>By the way, if you are using the&nbsp;Teamprise command line&nbsp;client then you can use the&nbsp;/proxy:http://your_proxy_server:8081 argument to specify a proxy server to use for the connection, I've just logged a bug so that we will also accept this undocumented environment variable, but we'll make it so that passing one explicitly will override any picked up from the environment variable.</p>
        </div>



    </div>
    <div class="asset-footer"></div>
</div>




                            <div class="content-nav">
                                <a href="http://www.woodwardweb.com/technology/">&laquo; Technology</a> |
                                <a href="http://www.woodwardweb.com/">Main Index</a> |
                                <a href="http://www.woodwardweb.com/archives.html">Archives</a>
                                | <a href="http://www.woodwardweb.com/vista/">Vista &raquo;</a>
                            </div>


                        </div>
                    </div>


                    <div id="beta">
    <div id="beta-inner">


    
    <div class="widget-syndication widget">
    <div class="widget-content">
        <ul>
            <li><img src="http://www.woodwardweb.com/mt/mt-static/images/status_icons/feed.gif" alt="Subscribe to feed" width="9" height="9" /> <a href="http://www.woodwardweb.com/index.xml">Subscribe to this blog's feed</a></li>
        </ul>
    </div>
</div>
<div class="widget-pages widget">
    <div class="widget-content">
        <ul>
    
            <li class="page page-1741"><a href="http://www.woodwardweb.com/about.html">About</a></li>
    
            <li class="page page-1742"><a href="http://www.woodwardweb.com/contact.html">Contact Me</a></li>
    
    
        </ul>
    </div>
</div>

<div class="widget-tag-cloud widget">
    <h3 class="widget-header">Tag Cloud</h3>
    <div class="widget-content">
        <ul>
    
            <li class="rank-7"><a href="javascript:void(0)" onclick="location.href='http://www.woodwardweb.com/mt/mt-search.cgi?blog_id=4&amp;tag=books&amp;limit=20';return false;" rel="tag">books</a></li>
    
            <li class="rank-7"><a href="javascript:void(0)" onclick="location.href='http://www.woodwardweb.com/mt/mt-search.cgi?blog_id=4&amp;tag=buddies&amp;limit=20';return false;" rel="tag">buddies</a></li>
    
            <li class="rank-4"><a href="javascript:void(0)" onclick="location.href='http://www.woodwardweb.com/mt/mt-search.cgi?blog_id=4&amp;tag=dotnet&amp;limit=20';return false;" rel="tag">dotnet</a></li>
    
            <li class="rank-6"><a href="javascript:void(0)" onclick="location.href='http://www.woodwardweb.com/mt/mt-search.cgi?blog_id=4&amp;tag=gadgets&amp;limit=20';return false;" rel="tag">gadgets</a></li>
    
            <li class="rank-6"><a href="javascript:void(0)" onclick="location.href='http://www.woodwardweb.com/mt/mt-search.cgi?blog_id=4&amp;tag=java&amp;limit=20';return false;" rel="tag">java</a></li>
    
            <li class="rank-4"><a href="javascript:void(0)" onclick="location.href='http://www.woodwardweb.com/mt/mt-search.cgi?blog_id=4&amp;tag=personal&amp;limit=20';return false;" rel="tag">personal</a></li>
    
            <li class="rank-5"><a href="javascript:void(0)" onclick="location.href='http://www.woodwardweb.com/mt/mt-search.cgi?blog_id=4&amp;tag=podcasting&amp;limit=20';return false;" rel="tag">podcasting</a></li>
    
            <li class="rank-4"><a href="javascript:void(0)" onclick="location.href='http://www.woodwardweb.com/mt/mt-search.cgi?blog_id=4&amp;tag=programming&amp;limit=20';return false;" rel="tag">programming</a></li>
    
            <li class="rank-8"><a href="javascript:void(0)" onclick="location.href='http://www.woodwardweb.com/mt/mt-search.cgi?blog_id=4&amp;tag=radiotfs&amp;limit=20';return false;" rel="tag">radiotfs</a></li>
    
            <li class="rank-7"><a href="javascript:void(0)" onclick="location.href='http://www.woodwardweb.com/mt/mt-search.cgi?blog_id=4&amp;tag=software&amp;limit=20';return false;" rel="tag">software</a></li>
    
            <li class="rank-3"><a href="javascript:void(0)" onclick="location.href='http://www.woodwardweb.com/mt/mt-search.cgi?blog_id=4&amp;tag=teamprise&amp;limit=20';return false;" rel="tag">teamprise</a></li>
    
            <li class="rank-4"><a href="javascript:void(0)" onclick="location.href='http://www.woodwardweb.com/mt/mt-search.cgi?blog_id=4&amp;tag=technology&amp;limit=20';return false;" rel="tag">technology</a></li>
    
            <li class="rank-3"><a href="javascript:void(0)" onclick="location.href='http://www.woodwardweb.com/mt/mt-search.cgi?blog_id=4&amp;tag=tfs&amp;limit=20';return false;" rel="tag">tfs</a></li>
    
            <li class="rank-5"><a href="javascript:void(0)" onclick="location.href='http://www.woodwardweb.com/mt/mt-search.cgi?blog_id=4&amp;tag=tfs2005&amp;limit=20';return false;" rel="tag">tfs2005</a></li>
    
            <li class="rank-3"><a href="javascript:void(0)" onclick="location.href='http://www.woodwardweb.com/mt/mt-search.cgi?blog_id=4&amp;tag=tfs2008&amp;limit=20';return false;" rel="tag">tfs2008</a></li>
    
            <li class="rank-5"><a href="javascript:void(0)" onclick="location.href='http://www.woodwardweb.com/mt/mt-search.cgi?blog_id=4&amp;tag=tfs2010&amp;limit=20';return false;" rel="tag">tfs2010</a></li>
    
            <li class="rank-6"><a href="javascript:void(0)" onclick="location.href='http://www.woodwardweb.com/mt/mt-search.cgi?blog_id=4&amp;tag=toptip&amp;limit=20';return false;" rel="tag">toptip</a></li>
    
            <li class="rank-6"><a href="javascript:void(0)" onclick="location.href='http://www.woodwardweb.com/mt/mt-search.cgi?blog_id=4&amp;tag=vista&amp;limit=20';return false;" rel="tag">vista</a></li>
    
            <li class="rank-1"><a href="javascript:void(0)" onclick="location.href='http://www.woodwardweb.com/mt/mt-search.cgi?blog_id=4&amp;tag=vsts&amp;limit=20';return false;" rel="tag">vsts</a></li>
    
            <li class="rank-5"><a href="javascript:void(0)" onclick="location.href='http://www.woodwardweb.com/mt/mt-search.cgi?blog_id=4&amp;tag=web&amp;limit=20';return false;" rel="tag">web</a></li>
    
        </ul>
    </div>
</div>
<div class="widget-search widget">
    <h3 class="widget-header">Search</h3>
    <div class="widget-content">
      <!-- Google CSE Search Box Begins -->
      <form id="searchbox_005734105946009878802:nczju-nslyq" action="http://www.google.com/cse">
        <input type="hidden" name="cx" value="005734105946009878802:nczju-nslyq" />
        <input name="q" type="text" size=20" />
        <!--input type="submit" name="sa" value="Go" / -->
        <input type="hidden" name="cof" value="FORID:0" />
      </form>
      <script type="text/javascript" src="http://www.google.com/coop/cse/brand?form=searchbox_005734105946009878802%3Anczju-nslyq"></script>
      <!-- Google CSE Search Box Ends -->
    </div>
</div>

<div class="widget-archive-monthly-dropdown widget-archive widget">
   <h3 class="widget-header"><a href="http://www.woodwardweb.com/archives.html">Archives</a></h3>
   <div class="widget-content">
      <select onchange="nav(this)">
         <option>Select a Month...</option>
         
         <option value="http://www.woodwardweb.com/2010/05/">May 2010</option>
         
    
        
         <option value="http://www.woodwardweb.com/2010/04/">April 2010</option>
         
    
        
         <option value="http://www.woodwardweb.com/2010/03/">March 2010</option>
         
    
        
         <option value="http://www.woodwardweb.com/2010/02/">February 2010</option>
         
    
        
         <option value="http://www.woodwardweb.com/2009/11/">November 2009</option>
         
    
        
         <option value="http://www.woodwardweb.com/2009/10/">October 2009</option>
         
    
        
         <option value="http://www.woodwardweb.com/2009/09/">September 2009</option>
         
    
        
         <option value="http://www.woodwardweb.com/2009/08/">August 2009</option>
         
    
        
         <option value="http://www.woodwardweb.com/2009/07/">July 2009</option>
         
    
        
         <option value="http://www.woodwardweb.com/2009/06/">June 2009</option>
         
    
        
         <option value="http://www.woodwardweb.com/2009/05/">May 2009</option>
         
    
        
         <option value="http://www.woodwardweb.com/2009/04/">April 2009</option>
         
    
        
         <option value="http://www.woodwardweb.com/2009/03/">March 2009</option>
         
    
        
         <option value="http://www.woodwardweb.com/2009/02/">February 2009</option>
         
    
        
         <option value="http://www.woodwardweb.com/2009/01/">January 2009</option>
         
    
        
         <option value="http://www.woodwardweb.com/2008/12/">December 2008</option>
         
    
        
         <option value="http://www.woodwardweb.com/2008/11/">November 2008</option>
         
    
        
         <option value="http://www.woodwardweb.com/2008/10/">October 2008</option>
         
    
        
         <option value="http://www.woodwardweb.com/2008/09/">September 2008</option>
         
    
        
         <option value="http://www.woodwardweb.com/2008/08/">August 2008</option>
         
    
        
         <option value="http://www.woodwardweb.com/2008/07/">July 2008</option>
         
    
        
         <option value="http://www.woodwardweb.com/2008/06/">June 2008</option>
         
    
        
         <option value="http://www.woodwardweb.com/2008/05/">May 2008</option>
         
    
        
         <option value="http://www.woodwardweb.com/2008/04/">April 2008</option>
         
    
        
         <option value="http://www.woodwardweb.com/2008/03/">March 2008</option>
         
    
        
         <option value="http://www.woodwardweb.com/2008/02/">February 2008</option>
         
    
        
         <option value="http://www.woodwardweb.com/2008/01/">January 2008</option>
         
    
        
         <option value="http://www.woodwardweb.com/2007/12/">December 2007</option>
         
    
        
         <option value="http://www.woodwardweb.com/2007/11/">November 2007</option>
         
    
        
         <option value="http://www.woodwardweb.com/2007/10/">October 2007</option>
         
    
        
         <option value="http://www.woodwardweb.com/2007/09/">September 2007</option>
         
    
        
         <option value="http://www.woodwardweb.com/2007/08/">August 2007</option>
         
    
        
         <option value="http://www.woodwardweb.com/2007/07/">July 2007</option>
         
    
        
         <option value="http://www.woodwardweb.com/2007/06/">June 2007</option>
         
    
        
         <option value="http://www.woodwardweb.com/2007/05/">May 2007</option>
         
    
        
         <option value="http://www.woodwardweb.com/2007/04/">April 2007</option>
         
    
        
         <option value="http://www.woodwardweb.com/2007/03/">March 2007</option>
         
    
        
         <option value="http://www.woodwardweb.com/2007/02/">February 2007</option>
         
    
        
         <option value="http://www.woodwardweb.com/2007/01/">January 2007</option>
         
    
        
         <option value="http://www.woodwardweb.com/2006/12/">December 2006</option>
         
    
        
         <option value="http://www.woodwardweb.com/2006/11/">November 2006</option>
         
    
        
         <option value="http://www.woodwardweb.com/2006/10/">October 2006</option>
         
    
        
         <option value="http://www.woodwardweb.com/2006/09/">September 2006</option>
         
    
        
         <option value="http://www.woodwardweb.com/2006/08/">August 2006</option>
         
    
        
         <option value="http://www.woodwardweb.com/2006/07/">July 2006</option>
         
    
        
         <option value="http://www.woodwardweb.com/2006/06/">June 2006</option>
         
    
        
         <option value="http://www.woodwardweb.com/2006/05/">May 2006</option>
         
    
        
         <option value="http://www.woodwardweb.com/2006/04/">April 2006</option>
         
    
        
         <option value="http://www.woodwardweb.com/2006/03/">March 2006</option>
         
    
        
         <option value="http://www.woodwardweb.com/2006/02/">February 2006</option>
         
    
        
         <option value="http://www.woodwardweb.com/2006/01/">January 2006</option>
         
    
        
         <option value="http://www.woodwardweb.com/2005/12/">December 2005</option>
         
    
        
         <option value="http://www.woodwardweb.com/2005/11/">November 2005</option>
         
    
        
         <option value="http://www.woodwardweb.com/2005/10/">October 2005</option>
         
    
        
         <option value="http://www.woodwardweb.com/2005/09/">September 2005</option>
         
    
        
         <option value="http://www.woodwardweb.com/2005/08/">August 2005</option>
         
    
        
         <option value="http://www.woodwardweb.com/2005/07/">July 2005</option>
         
    
        
         <option value="http://www.woodwardweb.com/2005/06/">June 2005</option>
         
    
        
         <option value="http://www.woodwardweb.com/2005/05/">May 2005</option>
         
    
        
         <option value="http://www.woodwardweb.com/2005/04/">April 2005</option>
         
    
        
         <option value="http://www.woodwardweb.com/2005/03/">March 2005</option>
         
    
        
         <option value="http://www.woodwardweb.com/2005/02/">February 2005</option>
         
    
        
         <option value="http://www.woodwardweb.com/2005/01/">January 2005</option>
         
    
        
         <option value="http://www.woodwardweb.com/2004/12/">December 2004</option>
         
    
        
         <option value="http://www.woodwardweb.com/2004/11/">November 2004</option>
         
    
        
         <option value="http://www.woodwardweb.com/2004/10/">October 2004</option>
         
    
        
         <option value="http://www.woodwardweb.com/2004/09/">September 2004</option>
         
    
        
         <option value="http://www.woodwardweb.com/2004/08/">August 2004</option>
         
    
        
         <option value="http://www.woodwardweb.com/2004/07/">July 2004</option>
         
    
        
         <option value="http://www.woodwardweb.com/2004/06/">June 2004</option>
         
    
        
         <option value="http://www.woodwardweb.com/2004/05/">May 2004</option>
         
    
        
         <option value="http://www.woodwardweb.com/2004/04/">April 2004</option>
         
    
        
         <option value="http://www.woodwardweb.com/2004/03/">March 2004</option>
         
    
        
         <option value="http://www.woodwardweb.com/2004/02/">February 2004</option>
         
    
        
         <option value="http://www.woodwardweb.com/2004/01/">January 2004</option>
         
    
        
         <option value="http://www.woodwardweb.com/2003/12/">December 2003</option>
         
    
        
         <option value="http://www.woodwardweb.com/2003/11/">November 2003</option>
         
    
        
         <option value="http://www.woodwardweb.com/2003/10/">October 2003</option>
         
    
        
         <option value="http://www.woodwardweb.com/2003/09/">September 2003</option>
         
    
        
         <option value="http://www.woodwardweb.com/2000/12/">December 2000</option>
         
    
        
         <option value="http://www.woodwardweb.com/2000/07/">July 2000</option>
         
    
        
         <option value="http://www.woodwardweb.com/2000/05/">May 2000</option>
         
    
        
         <option value="http://www.woodwardweb.com/2000/04/">April 2000</option>
         
    
        
         <option value="http://www.woodwardweb.com/2000/01/">January 2000</option>
         
      </select>
   </div>
</div>
<script type="text/javascript" charset="utf-8">
/* <![CDATA[ */
function nav(sel) {
   if (sel.selectedIndex == -1) return;
   var opt = sel.options[sel.selectedIndex];
   if (opt && opt.value)
      location.href = opt.value;
}
/* ]]> */
</script>
        
    

<div class="widget-recent-entries widget-archives widget">
    <h3 class="widget-header">Recent Entries</h3>
    <div class="widget-content">
        <ul>
        
            <li><a href="http://www.woodwardweb.com/podcasting/radio_tfs_on_te.html">Radio TFS on Team System 2010 First Impressions</a></li>
        
    
        
            <li><a href="http://www.woodwardweb.com/vsts/teched_online_2.html">TechEd Online 2009: Cross Platform Development with Team Foundation Server and Teamprise</a></li>
        
    
        
            <li><a href="http://www.woodwardweb.com/vsts/tfs_top_tip_16.html">TFS Top Tip #16 - Limit What you Build</a></li>
        
    
        
            <li><a href="http://www.woodwardweb.com/tfs_top_tip/tfs_top_tip_15.html">TFS Top Tip #15 - Baseline your Builds</a></li>
        
    
        
            <li><a href="http://www.woodwardweb.com/tfs_top_tip/tfs_top_tip_14.html">TFS Top Tip #14: The only 2 things you need to know when customizing Team Build</a></li>
        
    
        
            <li><a href="http://www.woodwardweb.com/tfs_top_tip/tfs_top_tip_13.html">TFS Top Tip #13 - Watch where you drop stuff</a></li>
        
    
        
            <li><a href="http://www.woodwardweb.com/tfs_top_tip/tfs_top_tip_12.html">TFS Top Tip #12 - Specifying a proxy server at the command line</a></li>
        
    
        
            <li><a href="http://www.woodwardweb.com/tfs_top_tip/tfs_top_tip_11.html">TFS Top Tip #11 - Removing source control files from your local file system</a></li>
        
    
        
            <li><a href="http://www.woodwardweb.com/vsts/tfs_top_tip_10.html">TFS Top Tip #10 - Keep Your Shelves Tidy</a></li>
        
    
        
            <li><a href="http://www.woodwardweb.com/vsts/tfs_top_tip_9_s.html">TFS Top Tip #9 - Secret Registry Hacks</a></li>
        
        </ul>
    </div>
</div>
        
    

<div class="widget-creative-commons widget">
   <div class="widget-content">
      <a href="http://creativecommons.org/licenses/by/1.0/"><img alt="Creative Commons License" src="http://creativecommons.org/images/public/somerights" /></a><br />
      This blog is licensed under a <a href="http://creativecommons.org/licenses/by/1.0/">Creative Commons License</a>.
   </div>
</div>




    </div>
</div>






                </div>
            </div>


            <div id="footer">
    <div id="footer-inner">
        <div id="footer-content">


            <div class="widget-creative-commons widget">
                <div class="widget-content">
                    This blog is licensed under a <a href="http://creativecommons.org/licenses/by/1.0/">Creative Commons License</a>.
                </div>
            </div>

        </div>
    </div>
</div>



        </div>
    </div>
</body>
</html>
